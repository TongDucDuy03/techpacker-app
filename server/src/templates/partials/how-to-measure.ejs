<!-- How To Measure Section Partial -->
<div class="section-title">HOW TO MEASURE</div>

<% if (howToMeasure && howToMeasure.length > 0) { %>
    <% howToMeasure.sort((a, b) => (a.stepNumber || 0) - (b.stepNumber || 0)).forEach((item, index) => { %>
    <div class="how-to-measure-item avoid-break">
        <div class="measure-image-container">
            <% if (item.imageUrl) { %>
            <img src="<%= item.imageUrl %>" alt="<%= item.pomCode %> - <%= item.pomName %>" class="measure-image" />
            <% } else { %>
            <div class="measure-image" style="background: #f5f5f5; display: flex; align-items: center; justify-content: center; color: #999; font-size: 10px; text-align: center;">
                <div>
                    <div style="font-weight: bold;"><%= item.pomCode %></div>
                    <div>Image Not Available</div>
                </div>
            </div>
            <% } %>
        </div>
        
        <div class="measure-content">
            <h3><%= item.pomCode %>: <%= item.pomName %></h3>
            
            <div style="margin-bottom: 10px;">
                <p><%= item.description %></p>
            </div>
            
            <% if (item.instructions && item.instructions.length > 0) { %>
            <div style="margin-bottom: 10px;">
                <strong style="font-size: 10px; color: #333;">Step-by-Step Instructions:</strong>
                <ol style="margin-left: 15px; margin-top: 5px; font-size: 9px;">
                    <% item.instructions.forEach(instruction => { %>
                    <li style="margin-bottom: 3px;"><%= instruction %></li>
                    <% }) %>
                </ol>
            </div>
            <% } %>
            
            <% if (item.tips && item.tips.length > 0) { %>
            <div style="margin-bottom: 8px;">
                <strong style="font-size: 9px; color: #0066cc;">üí° Tips:</strong>
                <ul style="margin-left: 15px; margin-top: 3px; font-size: 8px; color: #0066cc;">
                    <% item.tips.forEach(tip => { %>
                    <li style="margin-bottom: 2px;"><%= tip %></li>
                    <% }) %>
                </ul>
            </div>
            <% } %>
            
            <% if (item.commonMistakes && item.commonMistakes.length > 0) { %>
            <div style="margin-bottom: 8px;">
                <strong style="font-size: 9px; color: #cc6600;">‚ö†Ô∏è Common Mistakes:</strong>
                <ul style="margin-left: 15px; margin-top: 3px; font-size: 8px; color: #cc6600;">
                    <% item.commonMistakes.forEach(mistake => { %>
                    <li style="margin-bottom: 2px;"><%= mistake %></li>
                    <% }) %>
                </ul>
            </div>
            <% } %>
            
            <% if (item.relatedMeasurements && item.relatedMeasurements.length > 0) { %>
            <div style="font-size: 8px; color: #666; margin-top: 8px;">
                <strong>Related Measurements:</strong> <%= item.relatedMeasurements.join(', ') %>
            </div>
            <% } %>
        </div>
    </div>
    
    <!-- Add page break after every 2-3 items to prevent overcrowding -->
    <% if ((index + 1) % 3 === 0 && index < howToMeasure.length - 1) { %>
    <div class="page-break"></div>
    <div class="section-title">HOW TO MEASURE (continued)</div>
    <% } %>
    <% }) %>

<!-- General Measuring Guidelines -->
<div style="margin-top: 25px; padding: 12px; background: #f8f9fa; border: 1px solid #dee2e6; font-size: 9px;">
    <h4 style="margin-bottom: 8px; font-size: 11px; color: #333;">General Measuring Guidelines</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <div>
            <strong>Before Measuring:</strong>
            <ul style="margin-left: 15px; margin-top: 5px;">
                <li>Ensure garment is clean and pressed</li>
                <li>Lay garment flat on a clean, smooth surface</li>
                <li>Use a flexible measuring tape</li>
                <li>Take measurements in good lighting</li>
                <li>Record measurements immediately</li>
            </ul>
        </div>
        
        <div>
            <strong>Measuring Standards:</strong>
            <ul style="margin-left: 15px; margin-top: 5px;">
                <li>All measurements in centimeters (cm)</li>
                <li>Round to nearest 0.5 cm</li>
                <li>Take 3 measurements and use average</li>
                <li>Check measurements twice for accuracy</li>
                <li>Note any irregularities or defects</li>
            </ul>
        </div>
    </div>
    
    <div style="margin-top: 10px; padding-top: 8px; border-top: 1px solid #dee2e6;">
        <strong>Quality Control:</strong>
        <span style="margin-left: 10px;">All measurements must be within specified tolerances.</span>
        <span style="margin-left: 10px;">Critical measurements require supervisor approval.</span>
        <span style="margin-left: 10px;">Document any deviations immediately.</span>
    </div>
</div>

<% } else { %>
<div style="text-align: center; padding: 40px; color: #999; font-style: italic;">
    No measuring instructions defined for this tech pack.
</div>
<% } %>

<!-- Measurement Tools Reference -->
<div style="margin-top: 20px; font-size: 8px; color: #666;">
    <p><strong>Required Tools:</strong></p>
    <div style="display: flex; gap: 20px; margin-top: 5px;">
        <span>‚Ä¢ Flexible measuring tape (150cm minimum)</span>
        <span>‚Ä¢ Ruler or straight edge (30cm)</span>
        <span>‚Ä¢ Measuring gauge for small details</span>
        <span>‚Ä¢ Calculator for tolerance calculations</span>
    </div>
</div>
